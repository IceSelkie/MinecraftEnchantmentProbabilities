<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Icon Selector</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .icon-row {
    display: flex;
    margin-bottom: 15px;
  }
  .icon-container {
    text-align: center;
    cursor: pointer;
  }
  .icon {
    width: 50px;
    height: 50px;
    background-color: #f0f0f0;
    margin: 10px;
    border: 2px solid black;
    border-radius: 7.5px;
    padding: 2px;
    image-rendering: pixelated;
  }
  .selected {
    border: 2px solid orange;
    box-shadow: 0 4px 6px rgba(255, 165, 0, 0.6);
  }
</style>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  .line {
    fill: none;
    stroke-width: 2px;
  }
  .axis path,
  .axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
  }
</style>
</head>
<body>

<div class="icon-row" id="row-1">
  <div class="icon-container" onclick="selectIcon(this, 'row-1')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAHlBMVEUAAAD////Y2NjBwcGJZydoTh5ERERJNhUoHgsYGBhl7cYfAAAAAXRSTlMAQObYZgAAAEZJREFUeNpjwArS0hLANJuQsVopmJU509iDAQKKLCE0e4TRBDCjpGHyBIgAw+QJEAGGSRMgAgwTJ0AEGDihAlAtUEYHms0ANwkPY7rJmyQAAAAASUVORK5CYII=" alt="P" class="selected icon">
    <div>P</div>
  </div>
  <div class="icon-container" onclick="selectIcon(this, 'row-1')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAi0lEQVQ4y2NgIAO4uLj8h2GyNMOAhITEf7I079u3j3QDqKb5xo0bNNKMLVRBfJAmomwGKc7OzoYbQpJmZEOmTZsGVgzSBGKT5GeYASAMcg3JAYbuFZI1e5qJ/s/wkwNrhAUq0YaANHemq//XkOMGawBphBlEMPRBGGQzTDMygBlE0M8k+xfdBnINAAA+k7meeyM0+AAAAABJRU5ErkJggg==" alt="S" class="icon">
    <div>S</div>
  </div>
  <div class="icon-container" onclick="selectIcon(this, 'row-1')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAXUlEQVQ4y2NgoCVwcXH5D8NkaQaBGzdugDFZhkhISPwH4YMHD8IN8TQT/Z/hJ/efZINAhoBwZ7o62FCSXQOyGeQKkCEkGwBzNsxLJGumyNkwm8nSPGozmcmWgd4AAIyXYZ4KnMPXAAAAAElFTkSuQmCC" alt="H" class="icon">
    <div>H</div>
  </div>
  <div class="icon-container" onclick="selectIcon(this, 'row-1')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAeUlEQVQ4y2NgoAdwcXH5D8Jka4YBkg2BaT548OD/GzdukGYAsmYY9jQT/Z/hJ0ecIRISEmADQDaDNE+bNg1Ma8hxE+8KkCEgDLIZ2RCQGNGGwJwNshnmFaINAGnuTFeHOxvmIpJtJjnuKdaM7OwhYjMIgDSSrZkSAABx5YE7nrv/FQAAAABJRU5ErkJggg==" alt="A" class="icon">
    <div>A</div>
  </div>
</div>

<div class="icon-row" id="row-2">
  <div class="icon-container" onclick="selectIcon(this, 'row-2')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAFVBMVEXCnWK4lF+vj1WfhE2WdEF+YjdnUCyo+21oAAAAcElEQVR42g3CARXDIAwFwM/DAAk1kGQCVoKDDQeAA+JfQnvvwAV4XyD9CSk5hMS8yYUxR6wTG+WLjKQ3hFtvQgwX/RCbI9aIWHOjJMWrgonMzTqSuqt6RcwRZ+xALqkiJ0DJ7WZWWONO5o6zz3+ciAdixhUFVj2uwQAAAABJRU5ErkJggg==" alt="W" class="icon">
    <div>W</div>
  </div>
  <div class="icon-container" onclick="selectIcon(this, 'row-2')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAElBMVEW1tbWmpqaIh4hubW1hYWFSUlLm8qFQAAAAcUlEQVR42gVAARGDMAz8MAMjh4CSLwIWIgDSIGAD/1p2iPk5pTfFOW3QLR3nGrrGQxSLTL1wp2TJ3PF6W/yaOjSV9eEB2y3a4omQPSerG4f6biMXkP0a8X2DMdpytQkuIWuY49CuziJmclhoIcsjUvgH41gVHD61kt4AAAAASUVORK5CYII=" alt="S" class="icon">
    <div>S</div>
  </div>
  <div class="icon-container" onclick="selectIcon(this, 'row-2')">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAIVBMVEUAAAD////V//ah++hK7dks4NggxbUaqqcckZoRcnoUXlN/hNeyAAAAAXRSTlMAQObYZgAAAF1JREFUeNpjwApmzoTQnIJCE8CMiS5GWWABEWNltwVghpCQC4gx0dHFuKwKxHByNm4DM8SMTdpBjEku5eVpXUAGl3taWtkCECM8La0YxGBY4WKcBTaZa9WqBUg2AwByXRcdUQ3W3QAAAABJRU5ErkJggg==" alt="D" class="selected icon">
    <div>D</div>
  </div>
</div>

<script>
function selectIcon(selectedElement, rowId) {
  // Deselect all icons in the row
  var iconContainers = document.getElementById(rowId).getElementsByClassName('icon-container');
  for (var i = 0; i < iconContainers.length; i++) {
    var icon = iconContainers[i].querySelector('.icon'); // Using querySelector to target the .icon within the container
    icon.classList.remove('selected');
  }
  // Select the clicked icon
  var img = selectedElement.querySelector('.icon'); // Now we're sure to get the .icon element
  if (img) {
    img.classList.add('selected');
  }
}
</script>





<label for="upper-bound-slider">Upper Bound: </label>
<input type="range" id="upper-bound-slider" name="upperBound" min="10" max="50" value="30" step="0.001">
<output id="upper-bound-value" for="upper-bound-slider">30</output>

<svg width="600" height="400"></svg>

<script>
  // Example test functions until actual enchantment functions are implemented
  function f(x) {
    return x ** 0.75;
  }
  function g(x) {
    return x>=10?Math.sqrt(x-10):0;
  }

function drawGraph(upperBound) {
  // Generate data
  const resolution = 0.01;
  const data = d3.range(0, upperBound+resolution, resolution).map(function(x) {
    return {x: x, fx: f(x), gx: g(x)};
  });

  // Set the dimensions and margins of the graph
  const margin = {top: 20, right: 20, bottom: 30, left: 50},
      width = 600 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;

  // Append the svg object to the body of the page
  const svg = d3.select("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`);

  // Add X axis
  const x = d3.scaleLinear()
    .domain([0, upperBound])
    .range([0, width]);
  svg.append("g")
    .attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x));

  // Add Y axis
  const y = d3.scaleLinear()
    .domain([0, d3.max(data, d => Math.max(d.fx, d.gx))])
    .range([height, 0]);
  svg.append("g")
    .call(d3.axisLeft(y));

  // Add the f(x) line
  svg.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("stroke", "steelblue")
    .attr("d", d3.line()
      .x(d => x(d.x))
      .y(d => y(d.fx))
    );

  // Add the g(x) line
  svg.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("stroke", "red")
    .attr("d", d3.line()
      .x(d => x(d.x))
      .y(d => y(d.gx))
    );
  
  // Add points
  data.filter(d=>d.x%1==0).forEach(d => {
    svg.append('circle')
      .attr('cx', x(d.x))
      .attr('cy', y(d.fx))
      .attr('r', 3) // radius of dots
      .attr('fill', 'steelblue');
    svg.append('circle')
      .attr('cx', x(d.x))
      .attr('cy', y(d.gx))
      .attr('r', 3) // radius of dots
      .attr('fill', 'red');
  });

};

drawGraph(30);

document.getElementById('upper-bound-slider').addEventListener('input', function() {
  const upperBound = this.value;
  document.getElementById('upper-bound-value').textContent = upperBound;
  const svg = d3.select("svg");
  // Clear the previous graph
  svg.selectAll("*").remove();
  // Draw the graph with the new upper bound
  drawGraph(Number(upperBound));
});

</script>

</body>
</html>
